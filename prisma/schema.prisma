generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// User model for admin authentication
model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String   // Hash'lenmiş şifre (bcrypt)
  name      String?
  role      String   @default("admin") // admin, editor, viewer
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("users")
}

// ========================================
// HOMEPAGE MODELS (FAZ 3B) - WITH LOCALE SUPPORT
// ========================================

// Hero Section (En üst bölüm)
model HeroSection {
  id          String   @id @default(cuid())
  locale      String   @default("tr") // "tr" veya "en"
  title       String   // "Özel Tıbbi Bakım Hizmetleri"
  description String   @db.Text
  stat1Number String   // "1500+"
  stat1Text   String   // "Mutlu Hasta"
  stat2Number String   // "15"
  stat2Text   String   // "Yıl Tecrübe"
  button1Text String   // "Randevu Alın"
  button1Link String
  button2Text String   // "Hakkımızda"
  button2Link String
  imageUrl    String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@unique([locale])
  @@map("hero_section")
}

// About Section (Hakkımızda bölümü)
model AboutSection {
  id          String   @id @default(cuid())
  locale      String   @default("tr") // "tr" veya "en"
  title       String   // "Veneta Klinik Hakkında"
  description String   @db.Text
  buttonText  String   // "Devamını Oku"
  buttonLink  String
  imageUrl    String
  rating      Float    @default(4.88)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@unique([locale])
  @@map("about_section")
}

// Features (Özellikler - 4 kart) - Icon kaldırıldı
model Feature {
  id          String   @id @default(cuid())
  locale      String   @default("tr") // "tr" veya "en"
  title       String   // "Uzman Kadro"
  description String
  order       Int      // Sıralama (1-4)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([locale])
  @@map("features")
}

// Testimonials (Hasta Yorumları)
model Testimonial {
  id        String   @id @default(cuid())
  locale    String   @default("tr") // "tr" veya "en"
  name      String   // "Ayşe Yılmaz"
  procedure String   // "Burun Estetiği", "Lazer Epilasyon"
  comment   String   @db.Text
  rating    Int      @default(5) // 1-5
  imageUrl  String?  // Opsiyonel hasta fotoğrafı
  active    Boolean  @default(true) // Admin aktif/pasif yapar
  order     Int      @default(0)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([locale])
  @@index([active])
  @@map("testimonials")
}

// Blog Posts (Blog Yazıları)
model BlogPost {
  id          String   @id @default(cuid())
  locale      String   @default("tr") // "tr" veya "en"
  title       String
  slug        String
  excerpt     String   // Kısa özet (anasayfa için)
  content     String?  @db.Text // Tam içerik (detay sayfası için)
  imageUrl    String
  category    String?  // "surgical", "non-surgical", "general"
  author      String?  // "Dr. Ahmet Yılmaz"
  readTime    String?  // "5 dakika"
  published   Boolean  @default(true)
  order       Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@unique([locale, slug])
  @@index([locale])
  @@index([published])
  @@map("blog_posts")
}

// CTA Section (Call-to-Action - En alt bölüm)
model CTASection {
  id          String   @id @default(cuid())
  locale      String   @default("tr") // "tr" veya "en"
  title       String   // "Dönüşümü Yolculuğunuza..."
  description String
  button1Text String   // "Randevunuzu Alın"
  button1Link String
  button2Text String   // "İletişime Geç"
  button2Link String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@unique([locale])
  @@map("cta_section")
}

// Procedures (Prosedürler)
model Procedure {
  id          String   @id @default(cuid())
  locale      String   @default("tr") // "tr" veya "en"
  title       String   // "Burun Estetiği"
  slug        String   // "burun-estetigi"
  description String   @db.Text
  category    String   // "surgical", "non-surgical"
  imageUrl    String
  badge       String?  // "Popüler", "Yeni" (opsiyonel)
  detailLink  String?
  order       Int      @default(0)
  published   Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@unique([locale, slug])
  @@index([locale, published])
  @@index([category])
  @@map("procedures")
}

// ========================================
// FOOTER MODELS - DYNAMIC STRUCTURE
// ========================================

// Footer Ana İçerik (İletişim, Sosyal Medya, Copyright)
model FooterContent {
  id              String   @id @default(cuid())
  locale          String   @unique // "tr" | "en"
  
  // İletişim Bilgileri
  phone           String   // "+90 212 561 23 22"
  phoneSecondary  String?  // İkinci telefon (opsiyonel)
  email           String   // "info@venetaclinic.com"
  address         String   // "İstanbul, Türkiye"
  mapLink         String?  // Google Maps embed link (opsiyonel)
  
  // Sosyal Medya
  facebookUrl     String?
  instagramUrl    String?
  twitterUrl      String?
  linkedinUrl     String?
  youtubeUrl      String?
  
  // Copyright
  copyrightText   String   // "© 2024 Veneta Clinic. Tüm hakları saklıdır."
  
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@map("footer_content")
}

// Footer Link Grupları (Kurumsal, Hizmetler, Yasal, vb.)
model FooterLinkGroup {
  id        String   @id @default(cuid())
  locale    String   // "tr" | "en"
  title     String   // "Kurumsal", "Hizmetler", "Yasal"
  slug      String   // "corporate", "services", "legal"
  order     Int      @default(0) // Sıralama (1, 2, 3...)
  active    Boolean  @default(true) // Aktif/Pasif
  
  links     FooterLink[] // İlişki: Bu gruba ait linkler
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([locale, slug])
  @@index([locale, active, order])
  @@map("footer_link_groups")
}

// Footer Linkleri
model FooterLink {
  id      String   @id @default(cuid())
  groupId String   // Hangi gruba ait (FooterLinkGroup.id)
  
  title   String   // "Hakkımızda", "About Us"
  href    String   // "/hakkimizda", "/en/about"
  order   Int      @default(0) // Grup içinde sıralama
  active  Boolean  @default(true) // Aktif/Pasif
  
  group   FooterLinkGroup @relation(fields: [groupId], references: [id], onDelete: Cascade)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([groupId, active, order])
  @@map("footer_links")
}

// ========================================
// HEADER MODELS - NAVIGATION
// ========================================

model HeaderNavItem {
  id           String   @id @default(cuid())
  locale       String   // "tr" | "en"
  title        String   // "Anasayfa", "Home"
  href         String   // "/", "/en/"
  parentId     String?  // Alt menü için parent ID
  order        Int      @default(0) // Sıralama
  active       Boolean  @default(true) // Aktif/Pasif
  openInNewTab Boolean  @default(false) // Yeni sekmede aç
  
  // Self-referencing relation
  parent       HeaderNavItem?  @relation("NavItemChildren", fields: [parentId], references: [id], onDelete: Cascade)
  children     HeaderNavItem[] @relation("NavItemChildren")
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([locale, active, order])
  @@index([parentId])
  @@map("header_nav_items")
}

// ========================================
// CONTACT PAGE MODELS
// ========================================

model ContactPage {
  id          String   @id @default(cuid())
  locale      String   @unique
  
  // Header Section
  headerTitle       String   @db.Text
  headerDescription String   @db.Text
  headerButtonText  String
  headerImage       String
  
  // Form Section
  formTitle           String
  formDescription     String   @db.Text
  happyCustomersText  String
  
  // Google Reviews
  reviewsRating       String
  reviewsText         String
  reviewsLink         String   @db.Text
  
  // Contact Cards
  addressLabel  String
  addressText   String   @db.Text
  addressLink   String   @db.Text
  
  phoneLabel    String
  phoneText     String
  phoneLink     String
  
  hoursLabel    String
  hoursText     String   @db.Text
  
  // Form Fields & Messages
  formTitleBox          String
  formSubtitle          String   @db.Text
  firstNamePlaceholder  String
  lastNamePlaceholder   String
  emailPlaceholder      String
  phonePlaceholder      String
  messagePlaceholder    String
  submitButtonText      String
  submittingButtonText  String
  successMessage        String   @db.Text
  errorMessage          String   @db.Text
  
  // Email settings
  emailRecipient  String
  emailSubject    String
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("contact_page")
}

model ContactSubmission {
  id        String   @id @default(cuid())
  firstName String
  lastName  String
  email     String
  phone     String
  message   String   @db.Text
  locale    String
  status    String   @default("new")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([status, createdAt])
  @@map("contact_submissions")
}

// ========================================
// ABOUT PAGE MODELS
// ========================================

model AboutPage {
  id       String   @id @default(cuid())
  locale   String   @unique
  
  // Header Section
  headerTitle           String   @db.Text
  headerTitleHighlight  String
  headerSubtitle        String   @db.Text
  headerDescription     String   @db.Text
  headerButtonServices  String
  headerButtonContact   String
  headerImage           String
  headerExperienceYears String
  headerExperienceText  String
  
  // Features Section
  featuresTitle          String   @db.Text
  featuresTitleHighlight String
  featuresSubtitle       String   @db.Text
  
  // Mission Section
  missionDoctorImage  String
  missionQuote        String   @db.Text
  missionTitle        String   @db.Text
  missionSubtitle     String   @db.Text
  missionDescription1 String   @db.Text
  missionDescription2 String   @db.Text
  
  // Statistics
  stat1Value String
  stat1Label String
  stat2Value String
  stat2Label String
  stat3Value String
  stat3Label String
  stat4Value String
  stat4Label String
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("about_page")
}

model AboutFeature {
  id          String   @id @default(cuid())
  locale      String
  featureId   String
  title       String
  description String   @db.Text
  image       String
  order       Int      @default(0)
  active      Boolean  @default(true)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([locale, active, order])
  @@map("about_features")
}

// ========================================
// PROCEDURE PAGE MODELS (Template için)
// ========================================

// Ana sayfa bilgileri
model ProcedurePage {
  id     String @id @default(cuid())
  slug   String // "lazer-epilasyon", "sac-ekimi"
  locale String // "tr" | "en"
  
  // Hero Section
  heroTitle           String @db.Text
  heroTitleHighlight  String
  heroDescription     String @db.Text
  heroButtonReviews   String
  heroButtonPhone     String
  heroImage           String
  heroImageAlt        String
  
  // Device Info
  deviceTitle         String @db.Text
  deviceDescription   String @db.Text
  deviceFeaturesTitle String
  deviceAdvantagesTitle String
  
  // Pricing Section
  pricingTitle       String @db.Text
  pricingDescription String @db.Text
  pricingCallText    String // "Fiyat için arayın"
  
  // Why Us Section
  whyUsTitle String @db.Text
  
  // FAQ Section
  faqTitle String @db.Text
  
  // CTA Section
  ctaTitle        String @db.Text
  ctaDescription  String @db.Text
  ctaButtonPhone  String
  ctaButtonWhatsApp String

  // ✅ YENİ: Categories Intro (Ana sayfa için)
  categoriesIntroTitle       String? @db.Text
  categoriesIntroDescription String? @db.Text
  
  active    Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([slug, locale])
  @@index([slug, locale, active])
  @@map("procedure_pages")
}

// Hero Features (3 adet)
model ProcedureFeature {
  id          String @id @default(cuid())
  pageSlug    String // "lazer-epilasyon"
  locale      String
  icon        String // "zap", "users", "check-circle"
  title       String
  description String @db.Text
  order       Int    @default(0)
  active      Boolean @default(true)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([pageSlug, locale, active, order])
  @@map("procedure_features")
}

// Device Features & Advantages
model ProcedureDeviceItem {
  id       String @id @default(cuid())
  pageSlug String
  locale   String
  type     String // "feature" | "advantage"
  text     String @db.Text
  order    Int    @default(0)
  active   Boolean @default(true)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([pageSlug, locale, type, active, order])
  @@map("procedure_device_items")
}

// Treatment Areas
model ProcedureTreatmentArea {
  id          String @id @default(cuid())
  pageSlug    String
  locale      String
  title       String
  description String @db.Text
  order       Int    @default(0)
  active      Boolean @default(true)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([pageSlug, locale, active, order])
  @@map("procedure_treatment_areas")
}

// Pricing Options
model ProcedurePricing {
  id          String @id @default(cuid())
  pageSlug    String
  locale      String
  title       String
  description String @db.Text
  priceText   String // "Fiyat için arayın" veya gerçek fiyat
  colorScheme String // "primary", "secondary", "accent"
  order       Int    @default(0)
  active      Boolean @default(true)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([pageSlug, locale, active, order])
  @@map("procedure_pricing")
}

// Why Us Reasons
model ProcedureWhyUs {
  id          String @id @default(cuid())
  pageSlug    String
  locale      String
  icon        String // "lightning", "users", "dollar", "heart"
  title       String
  description String @db.Text
  colorScheme String // "primary", "secondary", "accent", "destructive"
  order       Int    @default(0)
  active      Boolean @default(true)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([pageSlug, locale, active, order])
  @@map("procedure_why_us")
}

// FAQ Items
model ProcedureFAQ {
  id       String @id @default(cuid())
  pageSlug String
  locale   String
  question String @db.Text
  answer   String @db.Text
  order    Int    @default(0)
  active   Boolean @default(true)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([pageSlug, locale, active, order])
  @@map("procedure_faqs")
}

// ============================================
// ABOUT SECTION MODELS
// ============================================

model ProcedureAboutSection {
  id              String @id @default(cuid())
  pageSlug        String // "ameliyatli-estetik", "burun-estetigi"
  locale          String // "tr" | "en"
  title           String
  description     String @db.Text
  areasTitle      String
  advantagesTitle String
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  @@unique([pageSlug, locale])
  @@index([pageSlug, locale])
  @@map("procedure_about_sections")
}

model ProcedureAboutArea {
  id       String  @id @default(cuid())
  pageSlug String
  locale   String
  text     String
  order    Int     @default(0)
  active   Boolean @default(true)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  @@index([pageSlug, locale, active, order])
  @@map("procedure_about_areas")
}

model ProcedureAboutAdvantage {
  id       String  @id @default(cuid())
  pageSlug String
  locale   String
  text     String
  order    Int     @default(0)
  active   Boolean @default(true)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  @@index([pageSlug, locale, active, order])
  @@map("procedure_about_advantages")
}

// ============================================
// PROCESS STEPS MODEL
// ============================================

model ProcedureProcess {
  id          String  @id @default(cuid())
  pageSlug    String
  locale      String
  number      String   // "1", "2", "3"
  title       String
  description String   @db.Text
  bgColor     String   @default("bg-primary/20")
  textColor   String   @default("text-primary")
  order       Int      @default(0)
  active      Boolean  @default(true)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  @@index([pageSlug, locale, active, order])
  @@map("procedure_processes")
}